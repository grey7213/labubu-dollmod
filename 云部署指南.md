# 🚀 娃改坊网站 - Render云部署完整指南

## 📋 部署前检查清单

### ✅ 必需文件确认

- [X] `app.py` - Flask主应用文件
- [X] `requirements.txt` - Python依赖包列表（已更新）
- [X] `Procfile` - Render启动配置
- [X] `runtime.txt` - Python版本指定
- [X] `templates/` - HTML模板目录
- [X] `static/` - 静态资源目录（CSS/JS/图片）

### ✅ 当前配置状态

```bash
# requirements.txt (已自动更新)
Flask==2.3.3
pandas>=1.5
pyecharts==1.9.1
requests>=2.31
Werkzeug==2.3.7
gunicorn==21.2.0
qrcode[pil]==7.4.2  # ✨ 新增：二维码生成库
numpy>=1.24         # ✨ 新增：数值计算库

# Procfile
web: gunicorn app:app

# runtime.txt
python-3.9.18
```

---

## 🌐 Render部署步骤详解

### 第一步：连接GitHub仓库

1. **登录Render控制台**

   - 访问：https://dashboard.render.com/
   - 使用GitHub账号登录
2. **创建新的Web Service**

   - 点击 `New +` → `Web Service`
   - 选择 `Connect a repository`
   - 授权访问您的GitHub账号
3. **选择项目仓库**

   - 找到您的 `labubu_site` 仓库
   - 点击 `Connect`

### 第二步：配置部署设置

#### 🔧 基础配置

```
Name: labubu-dollmod
Region: Singapore (亚太地区最佳)
Branch: main
Root Directory: (留空)
```

#### 🔧 构建配置

```
Runtime: Python 3
Build Command: pip install -r requirements.txt
Start Command: gunicorn app:app --bind 0.0.0.0:$PORT
```

#### 🔧 高级设置

```
Instance Type: Free (免费套餐)
Auto-Deploy: Yes (自动部署)
```

### 第三步：环境变量设置

**可选环境变量**（如果需要）：

```
FLASK_ENV=production
PORT=10000
PYTHONPATH=/opt/render/project/src
```

### 第四步：部署监控

1. **构建日志监控**

   - 部署过程中观察Build Logs
   - 确认所有依赖包安装成功
2. **启动状态检查**

   - 等待服务状态变为 `Live`
   - 访问分配的URL确认网站正常

---

## 🎯 部署后验证

### ✅ 功能检查清单

1. **主页访问测试**

   ```
   https://labubu-dollmod.onrender.com/
   ```
2. **核心页面验证**

   - [X] 主页 (`/`)
   - [X] PPT版本 (`/ppt`)
   - [X] 商业计划书 (`/business`)
   - [X] 图表页面 (`/chart/sales`)
3. **媒体资源检查**

   - [X] 拉布布图片显示正常
   - [X] 动态视频播放正常
   - [X] CSS样式加载完整
4. **数据图表验证**

   - [X] PyEcharts图表渲染正常
   - [X] 销售趋势图
   - [X] 全球分布图
   - [X] 价格分析图
   - [X] 词云图表

---

## 🔧 常见问题解决

### ❌ 部署失败原因

1. **依赖包安装失败**

   ```bash
   # 解决方案：检查requirements.txt格式
   pip install -r requirements.txt  # 本地测试
   ```
2. **静态文件404错误**

   ```python
   # 确认app.py中静态文件配置
   app = Flask(__name__)  # ✅ 正确
   ```
3. **内存不足错误**

   ```
   # 免费套餐限制：512MB RAM
   # 优化：减少图片尺寸，压缩静态资源
   ```

### ✅ 性能优化建议

1. **图片优化**

   ```bash
   # 批量压缩图片（本地执行）
   find static/images -name "*.jpg" -exec jpegoptim --max=85 {} \;
   ```
2. **缓存配置**

   ```python
   # 在app.py中添加缓存头
   @app.after_request
   def after_request(response):
       response.headers['Cache-Control'] = 'public, max-age=300'
       return response
   ```

---

## 📱 二维码使用说明

### 🎯 部署完成后的二维码

您的二维码已自动配置为生产环境URL：

- **网站首页**: `https://labubu-dollmod.onrender.com/`
- **PPT版本**: `https://labubu-dollmod.onrender.com/ppt`
- **商业计划**: `https://labubu-dollmod.onrender.com/business`
- **技术演示**: `https://labubu-dollmod.onrender.com/apple_style_demo.html`

### 🔄 重新生成二维码（如果域名变更）

```bash
python simple_qr.py
```

---

## 🎉 部署成功确认

### ✅ 最终检查

- [ ] 网站可正常访问
- [ ] 所有页面加载正常
- [ ] 图表显示完整
- [ ] 移动端适配良好
- [ ] 二维码指向正确URL

### 🚀 准备演示

1. **PPT二维码嵌入**

   - 使用 `qr_codes/` 目录中的PNG文件
   - 建议大小：2-3cm
   - 位置：PPT右下角
2. **演示话术**

   ```
   "请大家扫描二维码，现场体验我们的娃改坊数据洞察平台，
   感受基于真实泡泡玛特数据的商业分析能力！"
   ```

---

## 📞 技术支持

**如果遇到部署问题，可以检查：**

1. Render控制台的Build Logs
2. Runtime Logs中的错误信息
3. 确认所有文件已正确提交到GitHub

**祝您部署成功！🎯**
