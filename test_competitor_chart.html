<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç«å“åˆ†æè±¡é™å›¾æµ‹è¯• - äº‘éƒ¨ç½²ä¿®å¤ç‰ˆ</title>
    
    <!-- ECharts CDN with fallback -->
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js" 
            onerror="console.warn('ä¸»CDNåŠ è½½å¤±è´¥ï¼Œå¯ç”¨å¤‡ç”¨æ–¹æ¡ˆ')"></script>
    
    <style>
        body {
            font-family: 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #FFE4F1 0%, #E8F4FD 100%);
            margin: 0;
            padding: 20px;
            min-height: 100vh;
        }
        
        .test-container {
            max-width: 1000px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 16px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.06);
        }
        
        .test-header {
            text-align: center;
            margin-bottom: 30px;
            color: #2D3748;
        }
        
        .test-header h1 {
            color: #FF6B9D;
            font-size: 2rem;
            margin-bottom: 10px;
        }
        
        .test-info {
            background: #F7FAFC;
            border-left: 4px solid #4A90E2;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 0 8px 8px 0;
        }
        
        .chart-container {
            width: 100%;
            height: 500px;
            border: 2px solid #E2E8F0;
            border-radius: 8px;
            margin: 20px 0;
            display: flex;
            align-items: center;
            justify-content: center;
            background: white;
        }
        
        .loading {
            text-align: center;
            color: #4A5568;
        }
        
        .nav-links {
            text-align: center;
            margin-top: 20px;
        }
        
        .nav-links a {
            margin: 0 15px;
            color: #FF6B9D;
            text-decoration: none;
            font-weight: bold;
            padding: 8px 16px;
            border: 2px solid #FF6B9D;
            border-radius: 20px;
            transition: all 0.3s ease;
        }
        
        .nav-links a:hover {
            background: #FF6B9D;
            color: white;
        }
        
        .status-indicator {
            padding: 10px;
            margin: 10px 0;
            border-radius: 8px;
            text-align: center;
            font-weight: bold;
        }
        
        .status-success {
            background: #C6F6D5;
            color: #22543D;
            border: 1px solid #68D391;
        }
        
        .status-warning {
            background: #FEEBC8;
            color: #C05621;
            border: 1px solid #F6AD55;
        }
        
        .status-error {
            background: #FED7D7;
            color: #C53030;
            border: 1px solid #FC8181;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <div class="test-header">
            <h1>ğŸ† ç«å“åˆ†æè±¡é™å›¾æµ‹è¯•</h1>
            <p>äº‘éƒ¨ç½²ä¼˜åŒ–ç‰ˆæœ¬ - Renderç¯å¢ƒå…¼å®¹æ€§æµ‹è¯•</p>
        </div>
        
        <div class="test-info">
            <h3>ğŸ”§ ä¿®å¤å†…å®¹è¯´æ˜</h3>
            <ul>
                <li><strong>æ¸²æŸ“å™¨ä¼˜åŒ–</strong>: å¼ºåˆ¶ä½¿ç”¨canvasæ¸²æŸ“å™¨ï¼Œæé«˜äº‘ç«¯å…¼å®¹æ€§</li>
                <li><strong>CDNå¤‡ç”¨æ–¹æ¡ˆ</strong>: å¤šé‡CDNé™çº§æœºåˆ¶ï¼Œç¡®ä¿EChartsåº“å¯ç”¨</li>
                <li><strong>å›¾è¡¨é…ç½®å¢å¼º</strong>: ä¼˜åŒ–åæ ‡è½´ã€æ ‡ç­¾ã€å·¥å…·æç¤ºç­‰é…ç½®</li>
                <li><strong>é”™è¯¯é™çº§å¤„ç†</strong>: å½“å›¾è¡¨æ¸²æŸ“å¤±è´¥æ—¶æ˜¾ç¤ºå¤‡ç”¨å†…å®¹</li>
                <li><strong>è§†è§‰ä¼˜åŒ–</strong>: è°ƒæ•´æ°”æ³¡å¤§å°ã€é¢œè‰²ã€è¾¹æ¡†ç­‰è§†è§‰æ•ˆæœ</li>
            </ul>
        </div>
        
        <div id="status-indicator" class="status-indicator status-warning">
            â³ æ­£åœ¨åˆå§‹åŒ–å›¾è¡¨...
        </div>
        
        <div id="chart-container" class="chart-container">
            <div class="loading">
                <h3>ğŸ“Š åŠ è½½ä¸­...</h3>
                <p>æ­£åœ¨ç”Ÿæˆç«å“åˆ†æè±¡é™å›¾</p>
            </div>
        </div>
        
        <div class="nav-links">
            <a href="/">â† è¿”å›ä¸»é¡µ</a>
            <a href="/chart/competitor">å•ç‹¬å›¾è¡¨é¡µé¢</a>
            <a href="/ppt">PPTç‰ˆæœ¬</a>
            <a href="/test/media">åª’ä½“æµ‹è¯•</a>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const statusEl = document.getElementById('status-indicator');
            const chartContainer = document.getElementById('chart-container');
            
            // æ£€æŸ¥EChartsæ˜¯å¦åŠ è½½æˆåŠŸ
            function checkECharts() {
                if (typeof echarts !== 'undefined') {
                    statusEl.className = 'status-indicator status-success';
                    statusEl.textContent = 'âœ… EChartsåŠ è½½æˆåŠŸï¼Œæ­£åœ¨ç”Ÿæˆå›¾è¡¨...';
                    createChart();
                } else {
                    statusEl.className = 'status-indicator status-error';
                    statusEl.textContent = 'âŒ EChartsåŠ è½½å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥';
                    showFallback();
                }
            }
            
            // åˆ›å»ºå›¾è¡¨
            function createChart() {
                try {
                    const chart = echarts.init(chartContainer, 'romantic');
                    
                    const option = {
                        title: {
                            text: 'ğŸ† æ½®ç©è¡Œä¸šç«å“åˆ†æ',
                            subtext: 'å¸‚å€¼vså“ç‰ŒåŠ›è±¡é™å›¾',
                            left: 'center',
                            top: '5%',
                            textStyle: {
                                color: '#2D3748',
                                fontSize: 16,
                                fontWeight: 'bold'
                            },
                            subtextStyle: {
                                color: '#4A5568',
                                fontSize: 12
                            }
                        },
                        tooltip: {
                            trigger: 'item',
                            formatter: '{b}<br/>å¸‚å€¼: {c[0]}äº¿æ¸¯å…ƒ<br/>å“ç‰ŒåŠ›: {c[1]}åˆ†',
                            backgroundColor: 'rgba(255, 255, 255, 0.95)',
                            borderColor: '#FF6B9D',
                            borderWidth: 1,
                            textStyle: {
                                color: '#2D3748'
                            }
                        },
                        xAxis: {
                            name: 'å¸‚å€¼ (äº¿æ¸¯å…ƒ)',
                            type: 'log',
                            min: 10,
                            max: 5000,
                            axisLabel: {
                                color: '#4A5568',
                                formatter: '{value}'
                            },
                            axisLine: {
                                lineStyle: {
                                    color: '#E2E8F0'
                                }
                            },
                            splitLine: {
                                show: true,
                                lineStyle: {
                                    opacity: 0.3,
                                    color: '#E2E8F0'
                                }
                            }
                        },
                        yAxis: {
                            name: 'å“ç‰ŒåŠ›æŒ‡æ•°',
                            min: 55,
                            max: 90,
                            axisLabel: {
                                color: '#4A5568',
                                formatter: '{value}'
                            },
                            axisLine: {
                                lineStyle: {
                                    color: '#E2E8F0'
                                }
                            },
                            splitLine: {
                                show: true,
                                lineStyle: {
                                    opacity: 0.3,
                                    color: '#E2E8F0'
                                }
                            }
                        },
                        series: [{
                            name: 'ç«å“åˆ†æ',
                            type: 'scatter',
                            symbolSize: 20,
                            data: [
                                {value: [3100, 85], name: 'æ³¡æ³¡ç›ç‰¹'},
                                {value: [120, 72], name: '52TOYS'},
                                {value: [50, 68], name: 'TopToy'},
                                {value: [30, 65], name: 'é…·ä¹æ½®ç©'},
                                {value: [25, 62], name: 'IPå°ç«™'},
                                {value: [800, 78], name: 'ä¸‡ä»£'},
                                {value: [180, 70], name: 'MINISOååˆ›'}
                            ],
                            itemStyle: {
                                color: '#FF6B9D',
                                opacity: 0.8,
                                borderColor: '#FFFFFF',
                                borderWidth: 3
                            },
                            label: {
                                show: true,
                                position: 'right',
                                formatter: '{b}',
                                fontSize: 10,
                                color: '#2D3748'
                            }
                        }]
                    };
                    
                    chart.setOption(option);
                    
                    // å“åº”å¼å¤„ç†
                    window.addEventListener('resize', function() {
                        chart.resize();
                    });
                    
                    statusEl.className = 'status-indicator status-success';
                    statusEl.textContent = 'ğŸ‰ è±¡é™å›¾ç”ŸæˆæˆåŠŸï¼æ•°æ®æ¥æºï¼šæ³¡æ³¡ç›ç‰¹å®˜æ–¹è´¢æŠ¥';
                    
                } catch (error) {
                    console.error('å›¾è¡¨åˆ›å»ºå¤±è´¥:', error);
                    statusEl.className = 'status-indicator status-error';
                    statusEl.textContent = 'âŒ å›¾è¡¨åˆ›å»ºå¤±è´¥: ' + error.message;
                    showFallback();
                }
            }
            
            // æ˜¾ç¤ºé™çº§å†…å®¹
            function showFallback() {
                chartContainer.innerHTML = `
                    <div style="text-align: center; color: #2D3748; padding: 40px;">
                        <h3 style="margin-bottom: 20px;">ğŸ† æ½®ç©è¡Œä¸šç«å“åˆ†æ</h3>
                        <p style="margin-bottom: 30px; color: #4A5568;">å¸‚å€¼vså“ç‰ŒåŠ›è±¡é™å›¾</p>
                        <div style="background: #F7FAFC; padding: 20px; border-radius: 8px; border: 1px solid #E2E8F0;">
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; text-align: left;">
                                <div><strong>ğŸ¯ æ³¡æ³¡ç›ç‰¹</strong><br>å¸‚å€¼: 3100äº¿æ¸¯å…ƒ<br>å“ç‰ŒåŠ›: 85åˆ†</div>
                                <div><strong>ğŸ® ä¸‡ä»£</strong><br>å¸‚å€¼: 800äº¿æ¸¯å…ƒ<br>å“ç‰ŒåŠ›: 78åˆ†</div>
                                <div><strong>ğŸ›ï¸ MINISOååˆ›</strong><br>å¸‚å€¼: 180äº¿æ¸¯å…ƒ<br>å“ç‰ŒåŠ›: 70åˆ†</div>
                                <div><strong>ğŸ§¸ 52TOYS</strong><br>å¸‚å€¼: 120äº¿æ¸¯å…ƒ<br>å“ç‰ŒåŠ›: 72åˆ†</div>
                                <div><strong>ğŸŒŸ TopToy</strong><br>å¸‚å€¼: 50äº¿æ¸¯å…ƒ<br>å“ç‰ŒåŠ›: 68åˆ†</div>
                                <div><strong>ğŸ¨ é…·ä¹æ½®ç©</strong><br>å¸‚å€¼: 30äº¿æ¸¯å…ƒ<br>å“ç‰ŒåŠ›: 65åˆ†</div>
                                <div><strong>ğŸ“¦ IPå°ç«™</strong><br>å¸‚å€¼: 25äº¿æ¸¯å…ƒ<br>å“ç‰ŒåŠ›: 62åˆ†</div>
                            </div>
                            <p style="margin-top: 20px; color: #4A5568; font-style: italic;">
                                æ•°æ®æ˜¾ç¤ºæ³¡æ³¡ç›ç‰¹åœ¨å¸‚å€¼å’Œå“ç‰ŒåŠ›æ–¹é¢å‡å¤„äºè¡Œä¸šé¢†å…ˆåœ°ä½
                            </p>
                        </div>
                    </div>
                `;
            }
            
            // å»¶è¿Ÿæ£€æŸ¥EChartsåŠ è½½çŠ¶æ€
            setTimeout(checkECharts, 1000);
        });
    </script>
</body>
</html> 